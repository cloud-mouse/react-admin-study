import{c as sr}from"./classnames-ELZfJkp_.js";import{r as f}from"./react-CIM1rrag.js";import"./react-is-BpBQ4hf7.js";import{c as Zr,u as Y,d as ot,a as ft,r as $n,s as Kr,e as Yn,f as st,h as ct,i as dt,j as Be,k as Pn,l as lt,g as xn,m as vt,n as ht,o as mt}from"./rc-util-jI2IUycA.js";import{h as Xn,i as pn,a as Rn,_ as Nn,k as An,e as D,d as Fe,c as $,f as Ae,b as _e,j as Ln,l as gt,g as Mr}from"./@babel-CbNk-B6_.js";import{F as et}from"./@ant-design-BC-b2WZW.js";import{r as rt}from"./react-dom-CJeuIbjI.js";import{R as nt}from"./rc-resize-observer-DzFB8mcR.js";import{C as tt}from"./rc-motion-C8hKN_nz.js";var yt=["b"],bt=["v"],Sn=function(e){return Math.round(Number(e||0))},wt=function(e){if(e instanceof et)return e;if(e&&Fe(e)==="object"&&"h"in e&&"b"in e){var r=e,t=r.b,a=An(r,yt);return D(D({},a),{},{v:t})}return typeof e=="string"&&/hsb/.test(e)?e.replace(/hsb/,"hsv"):e},kn=function(n){Xn(r,n);var e=pn(r);function r(t){return Rn(this,r),e.call(this,wt(t))}return Nn(r,[{key:"toHsbString",value:function(){var a=this.toHsb(),i=Sn(a.s*100),u=Sn(a.b*100),o=Sn(a.h),l=a.a,g="hsb(".concat(o,", ").concat(i,"%, ").concat(u,"%)"),m="hsba(".concat(o,", ").concat(i,"%, ").concat(u,"%, ").concat(l.toFixed(l===0?0:2),")");return l===1?g:m}},{key:"toHsb",value:function(){var a=this.toHsv(),i=a.v,u=An(a,bt);return D(D({},u),{},{b:i,a:this.a})}}]),r}(et),Ct=function(e){return e instanceof kn?e:new kn(e)};Ct("#1677ff");var at=f.createContext(null),Hn=[];function St(n,e){var r=f.useState(function(){if(!Zr())return null;var c=document.createElement("div");return c}),t=$(r,1),a=t[0],i=f.useRef(!1),u=f.useContext(at),o=f.useState(Hn),l=$(o,2),g=l[0],m=l[1],d=u||(i.current?void 0:function(c){m(function(C){var s=[c].concat(Ae(C));return s})});function y(){a.parentElement||document.body.appendChild(a),i.current=!0}function h(){var c;(c=a.parentElement)===null||c===void 0||c.removeChild(a),i.current=!1}return Y(function(){return n?u?u(y):y():h(),h},[n]),Y(function(){g.length&&(g.forEach(function(c){return c()}),m(Hn))},[g]),[a,d]}function Mt(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Pt="rc-util-locker-".concat(Date.now()),jn=0;function xt(n){var e=!!n,r=f.useState(function(){return jn+=1,"".concat(Pt,"_").concat(jn)}),t=$(r,1),a=t[0];Y(function(){if(e){var i=ot(document.body).width,u=Mt();ft(`
html body {
  overflow-y: hidden;
  `.concat(u?"width: calc(100% - ".concat(i,"px);"):"",`
}`),a)}else $n(a);return function(){$n(a)}},[e,a])}var qt=!1;function Ft(n){return qt}var Vn=function(e){return e===!1?!1:!Zr()||!e?null:typeof e=="string"?document.querySelector(e):typeof e=="function"?e():e},it=f.forwardRef(function(n,e){var r=n.open,t=n.autoLock,a=n.getContainer;n.debug;var i=n.autoDestroy,u=i===void 0?!0:i,o=n.children,l=f.useState(r),g=$(l,2),m=g[0],d=g[1],y=m||r;f.useEffect(function(){(u||r)&&d(r)},[r,u]);var h=f.useState(function(){return Vn(a)}),c=$(h,2),C=c[0],s=c[1];f.useEffect(function(){var X=Vn(a);s(X??null)});var P=St(y&&!C),S=$(P,2),M=S[0],F=S[1],q=C??M;xt(t&&r&&Zr()&&(q===M||q===document.body));var b=null;if(o&&Kr(o)&&e){var L=o;b=L.ref}var _=Yn(b,e);if(!y||!Zr()||C===void 0)return null;var j=q===!1||Ft(),U=o;return e&&(U=f.cloneElement(o,{ref:_})),f.createElement(at.Provider,{value:F},j?U:rt.createPortal(U,q))});function qn(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var Fn=qn(),Et=/%[sdj%]/g,Dt=function(){};function En(n){if(!n||!n.length)return null;var e={};return n.forEach(function(r){var t=r.field;e[t]=e[t]||[],e[t].push(r)}),e}function ae(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),t=1;t<e;t++)r[t-1]=arguments[t];var a=0,i=r.length;if(typeof n=="function")return n.apply(null,r);if(typeof n=="string"){var u=n.replace(Et,function(o){if(o==="%%")return"%";if(a>=i)return o;switch(o){case"%s":return String(r[a++]);case"%d":return Number(r[a++]);case"%j":try{return JSON.stringify(r[a++])}catch{return"[Circular]"}break;default:return o}});return u}return n}function Rt(n){return n==="string"||n==="url"||n==="hex"||n==="email"||n==="date"||n==="pattern"}function B(n,e){return!!(n==null||e==="array"&&Array.isArray(n)&&!n.length||Rt(e)&&typeof n=="string"&&!n)}function Nt(n,e,r){var t=[],a=0,i=n.length;function u(o){t.push.apply(t,Ae(o||[])),a++,a===i&&r(t)}n.forEach(function(o){e(o,u)})}function Wn(n,e,r){var t=0,a=n.length;function i(u){if(u&&u.length){r(u);return}var o=t;t=t+1,o<a?e(n[o],i):r([])}i([])}function At(n){var e=[];return Object.keys(n).forEach(function(r){e.push.apply(e,Ae(n[r]||[]))}),e}var zn=function(n){Xn(r,n);var e=pn(r);function r(t,a){var i;return Rn(this,r),i=e.call(this,"Async Validation Error"),_e(Ln(i),"errors",void 0),_e(Ln(i),"fields",void 0),i.errors=t,i.fields=a,i}return Nn(r)}(gt(Error));function Tt(n,e,r,t,a){if(e.first){var i=new Promise(function(y,h){var c=function(P){return t(P),P.length?h(new zn(P,En(P))):y(a)},C=At(n);Wn(C,r,c)});return i.catch(function(y){return y}),i}var u=e.firstFields===!0?Object.keys(n):e.firstFields||[],o=Object.keys(n),l=o.length,g=0,m=[],d=new Promise(function(y,h){var c=function(s){if(m.push.apply(m,s),g++,g===l)return t(m),m.length?h(new zn(m,En(m))):y(a)};o.length||(t(m),y(a)),o.forEach(function(C){var s=n[C];u.indexOf(C)!==-1?Wn(s,r,c):Nt(s,r,c)})});return d.catch(function(y){return y}),d}function $t(n){return!!(n&&n.message!==void 0)}function Lt(n,e){for(var r=n,t=0;t<e.length;t++){if(r==null)return r;r=r[e[t]]}return r}function Bn(n,e){return function(r){var t;return n.fullFields?t=Lt(e,n.fullFields):t=e[r.field||n.fullField],$t(r)?(r.field=r.field||n.fullField,r.fieldValue=t,r):{message:typeof r=="function"?r():r,fieldValue:t,field:r.field||n.fullField}}}function _n(n,e){if(e){for(var r in e)if(e.hasOwnProperty(r)){var t=e[r];Fe(t)==="object"&&Fe(n[r])==="object"?n[r]=D(D({},n[r]),t):n[r]=t}}return n}var or="enum",kt=function(e,r,t,a,i){e[or]=Array.isArray(e[or])?e[or]:[],e[or].indexOf(r)===-1&&a.push(ae(i.messages[or],e.fullField,e[or].join(", ")))},Ht=function(e,r,t,a,i){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(r)||a.push(ae(i.messages.pattern.mismatch,e.fullField,r,e.pattern));else if(typeof e.pattern=="string"){var u=new RegExp(e.pattern);u.test(r)||a.push(ae(i.messages.pattern.mismatch,e.fullField,r,e.pattern))}}},jt=function(e,r,t,a,i){var u=typeof e.len=="number",o=typeof e.min=="number",l=typeof e.max=="number",g=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,m=r,d=null,y=typeof r=="number",h=typeof r=="string",c=Array.isArray(r);if(y?d="number":h?d="string":c&&(d="array"),!d)return!1;c&&(m=r.length),h&&(m=r.replace(g,"_").length),u?m!==e.len&&a.push(ae(i.messages[d].len,e.fullField,e.len)):o&&!l&&m<e.min?a.push(ae(i.messages[d].min,e.fullField,e.min)):l&&!o&&m>e.max?a.push(ae(i.messages[d].max,e.fullField,e.max)):o&&l&&(m<e.min||m>e.max)&&a.push(ae(i.messages[d].range,e.fullField,e.min,e.max))},ut=function(e,r,t,a,i,u){e.required&&(!t.hasOwnProperty(e.field)||B(r,u||e.type))&&a.push(ae(i.messages.required,e.fullField))},Qr;const Vt=function(){if(Qr)return Qr;var n="[a-fA-F\\d:]",e=function(b){return b&&b.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(n,")|(?<=").concat(n,")(?=\\s|$))"):""},r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",t="[a-fA-F\\d]{1,4}",a=["(?:".concat(t,":){7}(?:").concat(t,"|:)"),"(?:".concat(t,":){6}(?:").concat(r,"|:").concat(t,"|:)"),"(?:".concat(t,":){5}(?::").concat(r,"|(?::").concat(t,"){1,2}|:)"),"(?:".concat(t,":){4}(?:(?::").concat(t,"){0,1}:").concat(r,"|(?::").concat(t,"){1,3}|:)"),"(?:".concat(t,":){3}(?:(?::").concat(t,"){0,2}:").concat(r,"|(?::").concat(t,"){1,4}|:)"),"(?:".concat(t,":){2}(?:(?::").concat(t,"){0,3}:").concat(r,"|(?::").concat(t,"){1,5}|:)"),"(?:".concat(t,":){1}(?:(?::").concat(t,"){0,4}:").concat(r,"|(?::").concat(t,"){1,6}|:)"),"(?::(?:(?::".concat(t,"){0,5}:").concat(r,"|(?::").concat(t,"){1,7}|:))")],i="(?:%[0-9a-zA-Z]{1,})?",u="(?:".concat(a.join("|"),")").concat(i),o=new RegExp("(?:^".concat(r,"$)|(?:^").concat(u,"$)")),l=new RegExp("^".concat(r,"$")),g=new RegExp("^".concat(u,"$")),m=function(b){return b&&b.exact?o:new RegExp("(?:".concat(e(b)).concat(r).concat(e(b),")|(?:").concat(e(b)).concat(u).concat(e(b),")"),"g")};m.v4=function(q){return q&&q.exact?l:new RegExp("".concat(e(q)).concat(r).concat(e(q)),"g")},m.v6=function(q){return q&&q.exact?g:new RegExp("".concat(e(q)).concat(u).concat(e(q)),"g")};var d="(?:(?:[a-z]+:)?//)",y="(?:\\S+(?::\\S*)?@)?",h=m.v4().source,c=m.v6().source,C="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",s="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",P="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",S="(?::\\d{2,5})?",M='(?:[/?#][^\\s"]*)?',F="(?:".concat(d,"|www\\.)").concat(y,"(?:localhost|").concat(h,"|").concat(c,"|").concat(C).concat(s).concat(P,")").concat(S).concat(M);return Qr=new RegExp("(?:^".concat(F,"$)"),"i"),Qr};var Un={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Sr={integer:function(e){return Sr.number(e)&&parseInt(e,10)===e},float:function(e){return Sr.number(e)&&!Sr.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return Fe(e)==="object"&&!Sr.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(Un.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(Vt())},hex:function(e){return typeof e=="string"&&!!e.match(Un.hex)}},Wt=function(e,r,t,a,i){if(e.required&&r===void 0){ut(e,r,t,a,i);return}var u=["integer","float","array","regexp","object","method","email","number","date","url","hex"],o=e.type;u.indexOf(o)>-1?Sr[o](r)||a.push(ae(i.messages.types[o],e.fullField,e.type)):o&&Fe(r)!==e.type&&a.push(ae(i.messages.types[o],e.fullField,e.type))},zt=function(e,r,t,a,i){(/^\s+$/.test(r)||r==="")&&a.push(ae(i.messages.whitespace,e.fullField))};const x={required:ut,whitespace:zt,type:Wt,range:jt,enum:kt,pattern:Ht};var Bt=function(e,r,t,a,i){var u=[],o=e.required||!e.required&&a.hasOwnProperty(e.field);if(o){if(B(r)&&!e.required)return t();x.required(e,r,a,u,i)}t(u)},_t=function(e,r,t,a,i){var u=[],o=e.required||!e.required&&a.hasOwnProperty(e.field);if(o){if(r==null&&!e.required)return t();x.required(e,r,a,u,i,"array"),r!=null&&(x.type(e,r,a,u,i),x.range(e,r,a,u,i))}t(u)},Ut=function(e,r,t,a,i){var u=[],o=e.required||!e.required&&a.hasOwnProperty(e.field);if(o){if(B(r)&&!e.required)return t();x.required(e,r,a,u,i),r!==void 0&&x.type(e,r,a,u,i)}t(u)},It=function(e,r,t,a,i){var u=[],o=e.required||!e.required&&a.hasOwnProperty(e.field);if(o){if(B(r,"date")&&!e.required)return t();if(x.required(e,r,a,u,i),!B(r,"date")){var l;r instanceof Date?l=r:l=new Date(r),x.type(e,l,a,u,i),l&&x.range(e,l.getTime(),a,u,i)}}t(u)},Jt="enum",Qt=function(e,r,t,a,i){var u=[],o=e.required||!e.required&&a.hasOwnProperty(e.field);if(o){if(B(r)&&!e.required)return t();x.required(e,r,a,u,i),r!==void 0&&x[Jt](e,r,a,u,i)}t(u)},Zt=function(e,r,t,a,i){var u=[],o=e.required||!e.required&&a.hasOwnProperty(e.field);if(o){if(B(r)&&!e.required)return t();x.required(e,r,a,u,i),r!==void 0&&(x.type(e,r,a,u,i),x.range(e,r,a,u,i))}t(u)},Kt=function(e,r,t,a,i){var u=[],o=e.required||!e.required&&a.hasOwnProperty(e.field);if(o){if(B(r)&&!e.required)return t();x.required(e,r,a,u,i),r!==void 0&&(x.type(e,r,a,u,i),x.range(e,r,a,u,i))}t(u)},Gt=function(e,r,t,a,i){var u=[],o=e.required||!e.required&&a.hasOwnProperty(e.field);if(o){if(B(r)&&!e.required)return t();x.required(e,r,a,u,i),r!==void 0&&x.type(e,r,a,u,i)}t(u)},Ot=function(e,r,t,a,i){var u=[],o=e.required||!e.required&&a.hasOwnProperty(e.field);if(o){if(r===""&&(r=void 0),B(r)&&!e.required)return t();x.required(e,r,a,u,i),r!==void 0&&(x.type(e,r,a,u,i),x.range(e,r,a,u,i))}t(u)},Yt=function(e,r,t,a,i){var u=[],o=e.required||!e.required&&a.hasOwnProperty(e.field);if(o){if(B(r)&&!e.required)return t();x.required(e,r,a,u,i),r!==void 0&&x.type(e,r,a,u,i)}t(u)},Xt=function(e,r,t,a,i){var u=[],o=e.required||!e.required&&a.hasOwnProperty(e.field);if(o){if(B(r,"string")&&!e.required)return t();x.required(e,r,a,u,i),B(r,"string")||x.pattern(e,r,a,u,i)}t(u)},pt=function(e,r,t,a,i){var u=[],o=e.required||!e.required&&a.hasOwnProperty(e.field);if(o){if(B(r)&&!e.required)return t();x.required(e,r,a,u,i),B(r)||x.type(e,r,a,u,i)}t(u)},ea=function(e,r,t,a,i){var u=[],o=Array.isArray(r)?"array":Fe(r);x.required(e,r,a,u,i,o),t(u)},ra=function(e,r,t,a,i){var u=[],o=e.required||!e.required&&a.hasOwnProperty(e.field);if(o){if(B(r,"string")&&!e.required)return t();x.required(e,r,a,u,i,"string"),B(r,"string")||(x.type(e,r,a,u,i),x.range(e,r,a,u,i),x.pattern(e,r,a,u,i),e.whitespace===!0&&x.whitespace(e,r,a,u,i))}t(u)},Mn=function(e,r,t,a,i){var u=e.type,o=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if(B(r,u)&&!e.required)return t();x.required(e,r,a,o,i,u),B(r,u)||x.type(e,r,a,o,i)}t(o)};const Pr={string:ra,method:Gt,number:Ot,boolean:Ut,regexp:pt,integer:Kt,float:Zt,array:_t,object:Yt,enum:Qt,pattern:Xt,date:It,url:Mn,hex:Mn,email:Mn,required:ea,any:Bt};var Gr=function(){function n(e){Rn(this,n),_e(this,"rules",null),_e(this,"_messages",Fn),this.define(e)}return Nn(n,[{key:"define",value:function(r){var t=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(Fe(r)!=="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(a){var i=r[a];t.rules[a]=Array.isArray(i)?i:[i]})}},{key:"messages",value:function(r){return r&&(this._messages=_n(qn(),r)),this._messages}},{key:"validate",value:function(r){var t=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},u=r,o=a,l=i;if(typeof o=="function"&&(l=o,o={}),!this.rules||Object.keys(this.rules).length===0)return l&&l(null,u),Promise.resolve(u);function g(c){var C=[],s={};function P(M){if(Array.isArray(M)){var F;C=(F=C).concat.apply(F,Ae(M))}else C.push(M)}for(var S=0;S<c.length;S++)P(c[S]);C.length?(s=En(C),l(C,s)):l(null,u)}if(o.messages){var m=this.messages();m===Fn&&(m=qn()),_n(m,o.messages),o.messages=m}else o.messages=this.messages();var d={},y=o.keys||Object.keys(this.rules);y.forEach(function(c){var C=t.rules[c],s=u[c];C.forEach(function(P){var S=P;typeof S.transform=="function"&&(u===r&&(u=D({},u)),s=u[c]=S.transform(s),s!=null&&(S.type=S.type||(Array.isArray(s)?"array":Fe(s)))),typeof S=="function"?S={validator:S}:S=D({},S),S.validator=t.getValidationMethod(S),S.validator&&(S.field=c,S.fullField=S.fullField||c,S.type=t.getType(S),d[c]=d[c]||[],d[c].push({rule:S,value:s,source:u,field:c}))})});var h={};return Tt(d,o,function(c,C){var s=c.rule,P=(s.type==="object"||s.type==="array")&&(Fe(s.fields)==="object"||Fe(s.defaultField)==="object");P=P&&(s.required||!s.required&&c.value),s.field=c.field;function S(L,_){return D(D({},_),{},{fullField:"".concat(s.fullField,".").concat(L),fullFields:s.fullFields?[].concat(Ae(s.fullFields),[L]):[L]})}function M(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],_=Array.isArray(L)?L:[L];!o.suppressWarning&&_.length&&n.warning("async-validator:",_),_.length&&s.message!==void 0&&(_=[].concat(s.message));var j=_.map(Bn(s,u));if(o.first&&j.length)return h[s.field]=1,C(j);if(!P)C(j);else{if(s.required&&!c.value)return s.message!==void 0?j=[].concat(s.message).map(Bn(s,u)):o.error&&(j=[o.error(s,ae(o.messages.required,s.field))]),C(j);var U={};s.defaultField&&Object.keys(c.value).map(function(W){U[W]=s.defaultField}),U=D(D({},U),c.rule.fields);var X={};Object.keys(U).forEach(function(W){var V=U[W],le=Array.isArray(V)?V:[V];X[W]=le.map(S.bind(null,W))});var ie=new n(X);ie.messages(o.messages),c.rule.options&&(c.rule.options.messages=o.messages,c.rule.options.error=o.error),ie.validate(c.value,c.rule.options||o,function(W){var V=[];j&&j.length&&V.push.apply(V,Ae(j)),W&&W.length&&V.push.apply(V,Ae(W)),C(V.length?V:null)})}}var F;if(s.asyncValidator)F=s.asyncValidator(s,c.value,M,c.source,o);else if(s.validator){try{F=s.validator(s,c.value,M,c.source,o)}catch(L){var q,b;(q=(b=console).error)===null||q===void 0||q.call(b,L),o.suppressValidatorError||setTimeout(function(){throw L},0),M(L.message)}F===!0?M():F===!1?M(typeof s.message=="function"?s.message(s.fullField||s.field):s.message||"".concat(s.fullField||s.field," fails")):F instanceof Array?M(F):F instanceof Error&&M(F.message)}F&&F.then&&F.then(function(){return M()},function(L){return M(L)})},function(c){g(c)},u)}},{key:"getType",value:function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!Pr.hasOwnProperty(r.type))throw new Error(ae("Unknown rule type %s",r.type));return r.type||"string"}},{key:"getValidationMethod",value:function(r){if(typeof r.validator=="function")return r.validator;var t=Object.keys(r),a=t.indexOf("message");return a!==-1&&t.splice(a,1),t.length===1&&t[0]==="required"?Pr.required:Pr[this.getType(r)]||void 0}}]),n}();_e(Gr,"register",function(e,r){if(typeof r!="function")throw new Error("Cannot register a validator by type, validator is not a function");Pr[e]=r});_e(Gr,"warning",Dt);_e(Gr,"messages",Fn);_e(Gr,"validators",Pr);function na(n){var e=n.prefixCls,r=n.align,t=n.arrow,a=n.arrowPos,i=t||{},u=i.className,o=i.content,l=a.x,g=l===void 0?0:l,m=a.y,d=m===void 0?0:m,y=f.useRef();if(!r||!r.points)return null;var h={position:"absolute"};if(r.autoArrow!==!1){var c=r.points[0],C=r.points[1],s=c[0],P=c[1],S=C[0],M=C[1];s===S||!["t","b"].includes(s)?h.top=d:s==="t"?h.top=0:h.bottom=0,P===M||!["l","r"].includes(P)?h.left=g:P==="l"?h.left=0:h.right=0}return f.createElement("div",{ref:y,className:sr("".concat(e,"-arrow"),u),style:h},o)}function ta(n){var e=n.prefixCls,r=n.open,t=n.zIndex,a=n.mask,i=n.motion;return a?f.createElement(tt,Mr({},i,{motionAppear:!0,visible:r,removeOnLeave:!0}),function(u){var o=u.className;return f.createElement("div",{style:{zIndex:t},className:sr("".concat(e,"-mask"),o)})}):null}var aa=f.memo(function(n){var e=n.children;return e},function(n,e){return e.cache}),ia=f.forwardRef(function(n,e){var r=n.popup,t=n.className,a=n.prefixCls,i=n.style,u=n.target,o=n.onVisibleChanged,l=n.open,g=n.keepDom,m=n.fresh,d=n.onClick,y=n.mask,h=n.arrow,c=n.arrowPos,C=n.align,s=n.motion,P=n.maskMotion,S=n.forceRender,M=n.getPopupContainer,F=n.autoDestroy,q=n.portal,b=n.zIndex,L=n.onMouseEnter,_=n.onMouseLeave,j=n.onPointerEnter,U=n.onPointerDownCapture,X=n.ready,ie=n.offsetX,W=n.offsetY,V=n.offsetR,le=n.offsetB,ee=n.onAlign,Ee=n.onPrepare,J=n.stretch,Z=n.targetWidth,E=n.targetHeight,Ue=typeof r=="function"?r():r,ve=l||g,Q=(M==null?void 0:M.length)>0,R=f.useState(!M||!Q),re=$(R,2),Ie=re[0],cr=re[1];if(Y(function(){!Ie&&Q&&u&&cr(!0)},[Ie,Q,u]),!Ie)return null;var we="auto",ne={left:"-1000vw",top:"-1000vh",right:we,bottom:we};if(X||!l){var Te,Je=C.points,ue=C.dynamicInset||((Te=C._experimental)===null||Te===void 0?void 0:Te.dynamicInset),Ce=ue&&Je[0][1]==="r",he=ue&&Je[0][0]==="b";Ce?(ne.right=V,ne.left=we):(ne.left=ie,ne.right=we),he?(ne.bottom=le,ne.top=we):(ne.top=W,ne.bottom=we)}var p={};return J&&(J.includes("height")&&E?p.height=E:J.includes("minHeight")&&E&&(p.minHeight=E),J.includes("width")&&Z?p.width=Z:J.includes("minWidth")&&Z&&(p.minWidth=Z)),l||(p.pointerEvents="none"),f.createElement(q,{open:S||ve,getContainer:M&&function(){return M(u)},autoDestroy:F},f.createElement(ta,{prefixCls:a,open:l,zIndex:b,mask:y,motion:P}),f.createElement(nt,{onResize:ee,disabled:!l},function(dr){return f.createElement(tt,Mr({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:S,leavedClassName:"".concat(a,"-hidden")},s,{onAppearPrepare:Ee,onEnterPrepare:Ee,visible:l,onVisibleChanged:function(oe){var Se;s==null||(Se=s.onVisibleChanged)===null||Se===void 0||Se.call(s,oe),o(oe)}}),function($e,oe){var Se=$e.className,Qe=$e.style,K=sr(a,Se,t);return f.createElement("div",{ref:st(dr,e,oe),className:K,style:D(D(D(D({"--arrow-x":"".concat(c.x||0,"px"),"--arrow-y":"".concat(c.y||0,"px")},ne),p),Qe),{},{boxSizing:"border-box",zIndex:b},i),onMouseEnter:L,onMouseLeave:_,onPointerEnter:j,onClick:d,onPointerDownCapture:U},h&&f.createElement(na,{prefixCls:a,arrow:h,arrowPos:c,align:C}),f.createElement(aa,{cache:!l&&!m},Ue))})}))}),ua=f.forwardRef(function(n,e){var r=n.children,t=n.getTriggerDOMNode,a=Kr(r),i=f.useCallback(function(o){ct(e,t?t(o):o)},[t]),u=Yn(i,dt(r));return a?f.cloneElement(r,{ref:u}):r}),In=f.createContext(null);function Jn(n){return n?Array.isArray(n)?n:[n]:[]}function oa(n,e,r,t){return f.useMemo(function(){var a=Jn(r??e),i=Jn(t??e),u=new Set(a),o=new Set(i);return n&&(u.has("hover")&&(u.delete("hover"),u.add("click")),o.has("hover")&&(o.delete("hover"),o.add("click"))),[u,o]},[n,e,r,t])}function fa(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return r?n[0]===e[0]:n[0]===e[0]&&n[1]===e[1]}function sa(n,e,r,t){for(var a=r.points,i=Object.keys(n),u=0;u<i.length;u+=1){var o,l=i[u];if(fa((o=n[l])===null||o===void 0?void 0:o.points,a,t))return"".concat(e,"-placement-").concat(l)}return""}function Qn(n,e,r,t){return e||(r?{motionName:"".concat(n,"-").concat(r)}:t?{motionName:t}:null)}function qr(n){return n.ownerDocument.defaultView}function Dn(n){for(var e=[],r=n==null?void 0:n.parentElement,t=["hidden","scroll","clip","auto"];r;){var a=qr(r).getComputedStyle(r),i=a.overflowX,u=a.overflowY,o=a.overflow;[i,u,o].some(function(l){return t.includes(l)})&&e.push(r),r=r.parentElement}return e}function xr(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(n)?e:n}function Cr(n){return xr(parseFloat(n),0)}function Zn(n,e){var r=D({},n);return(e||[]).forEach(function(t){if(!(t instanceof HTMLBodyElement||t instanceof HTMLHtmlElement)){var a=qr(t).getComputedStyle(t),i=a.overflow,u=a.overflowClipMargin,o=a.borderTopWidth,l=a.borderBottomWidth,g=a.borderLeftWidth,m=a.borderRightWidth,d=t.getBoundingClientRect(),y=t.offsetHeight,h=t.clientHeight,c=t.offsetWidth,C=t.clientWidth,s=Cr(o),P=Cr(l),S=Cr(g),M=Cr(m),F=xr(Math.round(d.width/c*1e3)/1e3),q=xr(Math.round(d.height/y*1e3)/1e3),b=(c-C-S-M)*F,L=(y-h-s-P)*q,_=s*q,j=P*q,U=S*F,X=M*F,ie=0,W=0;if(i==="clip"){var V=Cr(u);ie=V*F,W=V*q}var le=d.x+U-ie,ee=d.y+_-W,Ee=le+d.width+2*ie-U-X-b,J=ee+d.height+2*W-_-j-L;r.left=Math.max(r.left,le),r.top=Math.max(r.top,ee),r.right=Math.min(r.right,Ee),r.bottom=Math.min(r.bottom,J)}}),r}function Kn(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r="".concat(e),t=r.match(/^(.*)\%$/);return t?n*(parseFloat(t[1])/100):parseFloat(r)}function Gn(n,e){var r=e||[],t=$(r,2),a=t[0],i=t[1];return[Kn(n.width,a),Kn(n.height,i)]}function On(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[n[0],n[1]]}function fr(n,e){var r=e[0],t=e[1],a,i;return r==="t"?i=n.y:r==="b"?i=n.y+n.height:i=n.y+n.height/2,t==="l"?a=n.x:t==="r"?a=n.x+n.width:a=n.x+n.width/2,{x:a,y:i}}function ze(n,e){var r={t:"b",b:"t",l:"r",r:"l"};return n.map(function(t,a){return a===e?r[t]||"c":t}).join("")}function ca(n,e,r,t,a,i,u){var o=f.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:a[t]||{}}),l=$(o,2),g=l[0],m=l[1],d=f.useRef(0),y=f.useMemo(function(){return e?Dn(e):[]},[e]),h=f.useRef({}),c=function(){h.current={}};n||c();var C=Be(function(){if(e&&r&&n){let de=function(ur,Ve){var We=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Fr,wr=R.x+ur,Ur=R.y+Ve,yn=wr+Ce,bn=Ur+ue,wn=Math.max(wr,We.left),v=Math.max(Ur,We.top),w=Math.min(yn,We.right),k=Math.min(bn,We.bottom);return Math.max(0,(w-wn)*(k-v))},_r=function(){Oe=R.y+T,Ye=Oe+ue,Re=R.x+N,nr=Re+Ce};var S,M,F,q,b=e,L=b.ownerDocument,_=qr(b),j=_.getComputedStyle(b),U=j.width,X=j.height,ie=j.position,W=b.style.left,V=b.style.top,le=b.style.right,ee=b.style.bottom,Ee=b.style.overflow,J=D(D({},a[t]),i),Z=L.createElement("div");(S=b.parentElement)===null||S===void 0||S.appendChild(Z),Z.style.left="".concat(b.offsetLeft,"px"),Z.style.top="".concat(b.offsetTop,"px"),Z.style.position=ie,Z.style.height="".concat(b.offsetHeight,"px"),Z.style.width="".concat(b.offsetWidth,"px"),b.style.left="0",b.style.top="0",b.style.right="auto",b.style.bottom="auto",b.style.overflow="hidden";var E;if(Array.isArray(r))E={x:r[0],y:r[1],width:0,height:0};else{var Ue,ve,Q=r.getBoundingClientRect();Q.x=(Ue=Q.x)!==null&&Ue!==void 0?Ue:Q.left,Q.y=(ve=Q.y)!==null&&ve!==void 0?ve:Q.top,E={x:Q.x,y:Q.y,width:Q.width,height:Q.height}}var R=b.getBoundingClientRect();R.x=(M=R.x)!==null&&M!==void 0?M:R.left,R.y=(F=R.y)!==null&&F!==void 0?F:R.top;var re=L.documentElement,Ie=re.clientWidth,cr=re.clientHeight,we=re.scrollWidth,ne=re.scrollHeight,Te=re.scrollTop,Je=re.scrollLeft,ue=R.height,Ce=R.width,he=E.height,p=E.width,dr={left:0,top:0,right:Ie,bottom:cr},$e={left:-Je,top:-Te,right:we-Je,bottom:ne-Te},oe=J.htmlRegion,Se="visible",Qe="visibleFirst";oe!=="scroll"&&oe!==Qe&&(oe=Se);var K=oe===Qe,Or=Zn($e,y),A=Zn(dr,y),Fr=oe===Se?A:Or,Ze=K?A:Fr;b.style.left="auto",b.style.top="auto",b.style.right="0",b.style.bottom="0";var G=b.getBoundingClientRect();b.style.left=W,b.style.top=V,b.style.right=le,b.style.bottom=ee,b.style.overflow=Ee,(q=b.parentElement)===null||q===void 0||q.removeChild(Z);var Le=xr(Math.round(Ce/parseFloat(U)*1e3)/1e3),De=xr(Math.round(ue/parseFloat(X)*1e3)/1e3);if(Le===0||De===0||Pn(r)&&!lt(r))return;var Yr=J.offset,Xr=J.targetOffset,Er=Gn(R,Yr),me=$(Er,2),ge=me[0],fe=me[1],pr=Gn(E,Xr),Ke=$(pr,2),se=Ke[0],ke=Ke[1];E.x-=se,E.y-=ke;var en=J.points||[],Dr=$(en,2),rn=Dr[0],nn=Dr[1],Me=On(nn),te=On(rn),lr=fr(E,Me),O=fr(R,te),He=D({},J),N=lr.x-O.x+ge,T=lr.y-O.y+fe,ye=de(N,T),Ge=de(N,T,A),vr=fr(E,["t","l"]),ce=fr(R,["t","l"]),Rr=fr(E,["b","r"]),hr=fr(R,["b","r"]),je=J.overflow||{},Nr=je.adjustX,tn=je.adjustY,mr=je.shiftX,rr=je.shiftY,gr=function(Ve){return typeof Ve=="boolean"?Ve:Ve>=0},Oe,Ye,Re,nr;_r();var Xe=gr(tn),Ar=te[0]===Me[0];if(Xe&&te[0]==="t"&&(Ye>Ze.bottom||h.current.bt)){var I=T;Ar?I-=ue-he:I=vr.y-hr.y-fe;var Tr=de(N,I),an=de(N,I,A);Tr>ye||Tr===ye&&(!K||an>=Ge)?(h.current.bt=!0,T=I,fe=-fe,He.points=[ze(te,0),ze(Me,0)]):h.current.bt=!1}if(Xe&&te[0]==="b"&&(Oe<Ze.top||h.current.tb)){var pe=T;Ar?pe+=ue-he:pe=Rr.y-ce.y-fe;var $r=de(N,pe),un=de(N,pe,A);$r>ye||$r===ye&&(!K||un>=Ge)?(h.current.tb=!0,T=pe,fe=-fe,He.points=[ze(te,0),ze(Me,0)]):h.current.tb=!1}var Lr=gr(Nr),kr=te[1]===Me[1];if(Lr&&te[1]==="l"&&(nr>Ze.right||h.current.rl)){var er=N;kr?er-=Ce-p:er=vr.x-hr.x-ge;var Hr=de(er,T),tr=de(er,T,A);Hr>ye||Hr===ye&&(!K||tr>=Ge)?(h.current.rl=!0,N=er,ge=-ge,He.points=[ze(te,1),ze(Me,1)]):h.current.rl=!1}if(Lr&&te[1]==="r"&&(Re<Ze.left||h.current.lr)){var Ne=N;kr?Ne+=Ce-p:Ne=Rr.x-ce.x-ge;var jr=de(Ne,T),Vr=de(Ne,T,A);jr>ye||jr===ye&&(!K||Vr>=Ge)?(h.current.lr=!0,N=Ne,ge=-ge,He.points=[ze(te,1),ze(Me,1)]):h.current.lr=!1}_r();var Pe=mr===!0?0:mr;typeof Pe=="number"&&(Re<A.left&&(N-=Re-A.left-ge,E.x+p<A.left+Pe&&(N+=E.x-A.left+p-Pe)),nr>A.right&&(N-=nr-A.right-ge,E.x>A.right-Pe&&(N+=E.x-A.right+Pe)));var be=rr===!0?0:rr;typeof be=="number"&&(Oe<A.top&&(T-=Oe-A.top-fe,E.y+he<A.top+be&&(T+=E.y-A.top+he-be)),Ye>A.bottom&&(T-=Ye-A.bottom-fe,E.y>A.bottom-be&&(T+=E.y-A.bottom+be)));var ar=R.x+N,ir=ar+Ce,xe=R.y+T,on=xe+ue,Wr=E.x,fn=Wr+p,yr=E.y,sn=yr+he,cn=Math.max(ar,Wr),dn=Math.min(ir,fn),zr=(cn+dn)/2,ln=zr-ar,vn=Math.max(xe,yr),Br=Math.min(on,sn),hn=(vn+Br)/2,mn=hn-xe;u==null||u(e,He);var br=G.right-R.x-(N+R.width),qe=G.bottom-R.y-(T+R.height);Le===1&&(N=Math.round(N),br=Math.round(br)),De===1&&(T=Math.round(T),qe=Math.round(qe));var gn={ready:!0,offsetX:N/Le,offsetY:T/De,offsetR:br/Le,offsetB:qe/De,arrowX:ln/Le,arrowY:mn/De,scaleX:Le,scaleY:De,align:He};m(gn)}}),s=function(){d.current+=1;var M=d.current;Promise.resolve().then(function(){d.current===M&&C()})},P=function(){m(function(M){return D(D({},M),{},{ready:!1})})};return Y(P,[t]),Y(function(){n||P()},[n]),[g.ready,g.offsetX,g.offsetY,g.offsetR,g.offsetB,g.arrowX,g.arrowY,g.scaleX,g.scaleY,g.align,s]}function da(n,e,r,t,a){Y(function(){if(n&&e&&r){let d=function(){t(),a()};var i=e,u=r,o=Dn(i),l=Dn(u),g=qr(u),m=new Set([g].concat(Ae(o),Ae(l)));return m.forEach(function(y){y.addEventListener("scroll",d,{passive:!0})}),g.addEventListener("resize",d,{passive:!0}),t(),function(){m.forEach(function(y){y.removeEventListener("scroll",d),g.removeEventListener("resize",d)})}}},[n,e,r])}function la(n,e,r,t,a,i,u,o){var l=f.useRef(n);l.current=n;var g=f.useRef(!1);f.useEffect(function(){if(e&&t&&(!a||i)){var d=function(){g.current=!1},y=function(s){var P;l.current&&!u(((P=s.composedPath)===null||P===void 0||(P=P.call(s))===null||P===void 0?void 0:P[0])||s.target)&&!g.current&&o(!1)},h=qr(t);h.addEventListener("pointerdown",d,!0),h.addEventListener("mousedown",y,!0),h.addEventListener("contextmenu",y,!0);var c=xn(r);return c&&(c.addEventListener("mousedown",y,!0),c.addEventListener("contextmenu",y,!0)),function(){h.removeEventListener("pointerdown",d,!0),h.removeEventListener("mousedown",y,!0),h.removeEventListener("contextmenu",y,!0),c&&(c.removeEventListener("mousedown",y,!0),c.removeEventListener("contextmenu",y,!0))}}},[e,r,t,a,i]);function m(){g.current=!0}return m}var va=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function ha(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:it,e=f.forwardRef(function(r,t){var a=r.prefixCls,i=a===void 0?"rc-trigger-popup":a,u=r.children,o=r.action,l=o===void 0?"hover":o,g=r.showAction,m=r.hideAction,d=r.popupVisible,y=r.defaultPopupVisible,h=r.onPopupVisibleChange,c=r.afterPopupVisibleChange,C=r.mouseEnterDelay,s=r.mouseLeaveDelay,P=s===void 0?.1:s,S=r.focusDelay,M=r.blurDelay,F=r.mask,q=r.maskClosable,b=q===void 0?!0:q,L=r.getPopupContainer,_=r.forceRender,j=r.autoDestroy,U=r.destroyPopupOnHide,X=r.popup,ie=r.popupClassName,W=r.popupStyle,V=r.popupPlacement,le=r.builtinPlacements,ee=le===void 0?{}:le,Ee=r.popupAlign,J=r.zIndex,Z=r.stretch,E=r.getPopupClassNameFromAlign,Ue=r.fresh,ve=r.alignPoint,Q=r.onPopupClick,R=r.onPopupAlign,re=r.arrow,Ie=r.popupMotion,cr=r.maskMotion,we=r.popupTransitionName,ne=r.popupAnimation,Te=r.maskTransitionName,Je=r.maskAnimation,ue=r.className,Ce=r.getTriggerDOMNode,he=An(r,va),p=j||U||!1,dr=f.useState(!1),$e=$(dr,2),oe=$e[0],Se=$e[1];Y(function(){Se(vt())},[]);var Qe=f.useRef({}),K=f.useContext(In),Or=f.useMemo(function(){return{registerSubPopup:function(w,k){Qe.current[w]=k,K==null||K.registerSubPopup(w,k)}}},[K]),A=ht(),Fr=f.useState(null),Ze=$(Fr,2),G=Ze[0],Le=Ze[1],De=f.useRef(null),Yr=Be(function(v){De.current=v,Pn(v)&&G!==v&&Le(v),K==null||K.registerSubPopup(A,v)}),Xr=f.useState(null),Er=$(Xr,2),me=Er[0],ge=Er[1],fe=f.useRef(null),pr=Be(function(v){Pn(v)&&me!==v&&(ge(v),fe.current=v)}),Ke=f.Children.only(u),se=(Ke==null?void 0:Ke.props)||{},ke={},en=Be(function(v){var w,k,z=me;return(z==null?void 0:z.contains(v))||((w=xn(z))===null||w===void 0?void 0:w.host)===v||v===z||(G==null?void 0:G.contains(v))||((k=xn(G))===null||k===void 0?void 0:k.host)===v||v===G||Object.values(Qe.current).some(function(H){return(H==null?void 0:H.contains(v))||v===H})}),Dr=Qn(i,Ie,ne,we),rn=Qn(i,cr,Je,Te),nn=f.useState(y||!1),Me=$(nn,2),te=Me[0],lr=Me[1],O=d??te,He=Be(function(v){d===void 0&&lr(v)});Y(function(){lr(d||!1)},[d]);var N=f.useRef(O);N.current=O;var T=f.useRef([]);T.current=[];var ye=Be(function(v){var w;He(v),((w=T.current[T.current.length-1])!==null&&w!==void 0?w:O)!==v&&(T.current.push(v),h==null||h(v))}),Ge=f.useRef(),vr=function(){clearTimeout(Ge.current)},ce=function(w){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;vr(),k===0?ye(w):Ge.current=setTimeout(function(){ye(w)},k*1e3)};f.useEffect(function(){return vr},[]);var Rr=f.useState(!1),hr=$(Rr,2),je=hr[0],Nr=hr[1];Y(function(v){(!v||O)&&Nr(!0)},[O]);var tn=f.useState(null),mr=$(tn,2),rr=mr[0],gr=mr[1],Oe=f.useState(null),Ye=$(Oe,2),Re=Ye[0],nr=Ye[1],Xe=function(w){nr([w.clientX,w.clientY])},Ar=ca(O,G,ve&&Re!==null?Re:me,V,ee,Ee,R),I=$(Ar,11),Tr=I[0],an=I[1],pe=I[2],$r=I[3],un=I[4],Lr=I[5],kr=I[6],er=I[7],Hr=I[8],tr=I[9],Ne=I[10],jr=oa(oe,l,g,m),Vr=$(jr,2),Pe=Vr[0],be=Vr[1],ar=Pe.has("click"),ir=be.has("click")||be.has("contextMenu"),xe=Be(function(){je||Ne()}),on=function(){N.current&&ve&&ir&&ce(!1)};da(O,me,G,xe,on),Y(function(){xe()},[Re,V]),Y(function(){O&&!(ee!=null&&ee[V])&&xe()},[JSON.stringify(Ee)]);var Wr=f.useMemo(function(){var v=sa(ee,i,tr,ve);return sr(v,E==null?void 0:E(tr))},[tr,E,ee,i,ve]);f.useImperativeHandle(t,function(){return{nativeElement:fe.current,popupElement:De.current,forceAlign:xe}});var fn=f.useState(0),yr=$(fn,2),sn=yr[0],cn=yr[1],dn=f.useState(0),zr=$(dn,2),ln=zr[0],vn=zr[1],Br=function(){if(Z&&me){var w=me.getBoundingClientRect();cn(w.width),vn(w.height)}},hn=function(){Br(),xe()},mn=function(w){Nr(!1),Ne(),c==null||c(w)},br=function(){return new Promise(function(w){Br(),gr(function(){return w})})};Y(function(){rr&&(Ne(),rr(),gr(null))},[rr]);function qe(v,w,k,z){ke[v]=function(H){var Ir;z==null||z(H),ce(w,k);for(var Cn=arguments.length,Tn=new Array(Cn>1?Cn-1:0),Jr=1;Jr<Cn;Jr++)Tn[Jr-1]=arguments[Jr];(Ir=se[v])===null||Ir===void 0||Ir.call.apply(Ir,[se,H].concat(Tn))}}(ar||ir)&&(ke.onClick=function(v){var w;N.current&&ir?ce(!1):!N.current&&ar&&(Xe(v),ce(!0));for(var k=arguments.length,z=new Array(k>1?k-1:0),H=1;H<k;H++)z[H-1]=arguments[H];(w=se.onClick)===null||w===void 0||w.call.apply(w,[se,v].concat(z))});var gn=la(O,ir,me,G,F,b,en,ce),de=Pe.has("hover"),_r=be.has("hover"),ur,Ve;de&&(qe("onMouseEnter",!0,C,function(v){Xe(v)}),qe("onPointerEnter",!0,C,function(v){Xe(v)}),ur=function(w){(O||je)&&G!==null&&G!==void 0&&G.contains(w.target)&&ce(!0,C)},ve&&(ke.onMouseMove=function(v){var w;(w=se.onMouseMove)===null||w===void 0||w.call(se,v)})),_r&&(qe("onMouseLeave",!1,P),qe("onPointerLeave",!1,P),Ve=function(){ce(!1,P)}),Pe.has("focus")&&qe("onFocus",!0,S),be.has("focus")&&qe("onBlur",!1,M),Pe.has("contextMenu")&&(ke.onContextMenu=function(v){var w;N.current&&be.has("contextMenu")?ce(!1):(Xe(v),ce(!0)),v.preventDefault();for(var k=arguments.length,z=new Array(k>1?k-1:0),H=1;H<k;H++)z[H-1]=arguments[H];(w=se.onContextMenu)===null||w===void 0||w.call.apply(w,[se,v].concat(z))}),ue&&(ke.className=sr(se.className,ue));var We=D(D({},se),ke),wr={},Ur=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Ur.forEach(function(v){he[v]&&(wr[v]=function(){for(var w,k=arguments.length,z=new Array(k),H=0;H<k;H++)z[H]=arguments[H];(w=We[v])===null||w===void 0||w.call.apply(w,[We].concat(z)),he[v].apply(he,z)})});var yn=f.cloneElement(Ke,D(D({},We),wr)),bn={x:Lr,y:kr},wn=re?D({},re!==!0?re:{}):null;return f.createElement(f.Fragment,null,f.createElement(nt,{disabled:!O,ref:pr,onResize:hn},f.createElement(ua,{getTriggerDOMNode:Ce},yn)),f.createElement(In.Provider,{value:Or},f.createElement(ia,{portal:n,ref:Yr,prefixCls:i,popup:X,className:sr(ie,Wr),style:W,target:me,onMouseEnter:ur,onMouseLeave:Ve,onPointerEnter:ur,zIndex:J,open:O,keepDom:je,fresh:Ue,onClick:Q,onPointerDownCapture:gn,mask:F,motion:Dr,maskMotion:rn,onVisibleChanged:mn,onPrepare:br,forceRender:_,autoDestroy:p,getPopupContainer:L,align:tr,arrow:wn,arrowPos:bn,ready:Tr,offsetX:an,offsetY:pe,offsetR:$r,offsetB:un,onAlign:xe,stretch:Z,targetWidth:sn/er,targetHeight:ln/Hr})))});return e}const xa=ha(it);function qa(n){var e=f.createContext(void 0),r=function(a){var i=a.value,u=a.children,o=f.useRef(i);o.current=i;var l=f.useState(function(){return{getValue:function(){return o.current},listeners:new Set}}),g=$(l,1),m=g[0];return Y(function(){rt.unstable_batchedUpdates(function(){m.listeners.forEach(function(d){d(i)})})},[i]),f.createElement(e.Provider,{value:m},u)};return{Context:e,Provider:r,defaultValue:n}}function Fa(n,e){var r=Be(typeof e=="function"?e:function(d){if(e===void 0)return d;if(!Array.isArray(e))return d[e];var y={};return e.forEach(function(h){y[h]=d[h]}),y}),t=f.useContext(n==null?void 0:n.Context),a=t||{},i=a.listeners,u=a.getValue,o=f.useRef();o.current=r(t?u():n==null?void 0:n.defaultValue);var l=f.useState({}),g=$(l,2),m=g[1];return Y(function(){if(!t)return;function d(y){var h=r(y);mt(o.current,h,!0)||m({})}return i.add(d),function(){i.delete(d)}},[t]),o.current}function Ea(){var n=f.createContext(null);function e(){return f.useContext(n)}function r(a,i){var u=Kr(a),o=function(g,m){var d=u?{ref:m}:{},y=f.useRef(0),h=f.useRef(g),c=e();return c!==null?f.createElement(a,Mr({},g,d)):((!i||i(h.current,g))&&(y.current+=1),h.current=g,f.createElement(n.Provider,{value:y.current},f.createElement(a,Mr({},g,d))))};return u?f.forwardRef(o):o}function t(a,i){var u=Kr(a),o=function(g,m){var d=u?{ref:m}:{};return e(),f.createElement(a,Mr({},g,d))};return u?f.memo(f.forwardRef(o),i):f.memo(o,i)}return{makeImmutable:r,responseImmutable:t,useImmutableMark:e}}export{kn as C,Gr as S,xa as T,qa as a,Ea as c,Fa as u};
