import{r as h,j as e,a as f}from"./react-CIM1rrag.js";import{b as F}from"./react-dom-CJeuIbjI.js";import{u as C,a as N,P as A}from"./react-redux-D0yBdTpB.js";import{c as E,a as O}from"./@reduxjs-CqQfAypW.js";import{L as I,M as P,B as d,D as T,S as B,A as b,s as g,F as M,a as m,I as x}from"./antd-CUObeLNM.js";import{u as $,a as v,L as k,B as q,R as z,b as L}from"./react-router-IRxUU6Py.js";import{N as K,O as S,P as U,Q as H,T as J,U as Q}from"./@ant-design-BC-b2WZW.js";import{u as _}from"./react-hook-form-BGZJ-NlQ.js";import"./classnames-ELZfJkp_.js";import"./scheduler-vn6Di64w.js";import"./use-sync-external-store-BrmDI3wq.js";import"./redux-DHIXsp5o.js";import"./immer-DFAsTp4z.js";import"./redux-thunk-ClJT1hhx.js";import"./rc-util-jI2IUycA.js";import"./@babel-CbNk-B6_.js";import"./react-is-BpBQ4hf7.js";import"./rc-resize-observer-DzFB8mcR.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./rc-motion-C8hKN_nz.js";import"./@rc-component-DYklQSrI.js";import"./rc-tooltip-CSlTsdNr.js";import"./rc-overflow-CGdw2xB4.js";import"./rc-menu-sZHWDNAJ.js";import"./rc-select-BE_RAQt-.js";import"./rc-virtual-list-jPw5Q6vC.js";import"./rc-field-form-C4uicx5k.js";import"./scroll-into-view-if-needed-m3rLrdt6.js";import"./compute-scroll-into-view-r6mj3pQe.js";import"./rc-notification-HMioD8NS.js";import"./rc-table-CkLUP5U0.js";import"./rc-tree-D3G6_c9r.js";import"./rc-checkbox-_OApH_jJ.js";import"./rc-pagination-DV1iuG3E.js";import"./rc-picker-CBunl1Vo.js";import"./rc-dropdown-ClCqGEXP.js";import"./throttle-debounce-B7n2cUDB.js";import"./rc-input-RdaaKTYE.js";import"./rc-textarea-BqLitt1-.js";import"./cookie--_YQFYBD.js";import"./@emotion-CW87jbl0.js";import"./stylis-CnpK-kws.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();const G={token:localStorage.getItem("token"),userInfo:JSON.parse(localStorage.getItem("userInfo")||"null"),isLoggedIn:!!localStorage.getItem("token")},w=E({name:"user",initialState:G,reducers:{setToken:(t,o)=>{t.token=o.payload,t.isLoggedIn=!0,localStorage.setItem("token",o.payload)},setUserInfo:(t,o)=>{t.userInfo=o.payload},logout:t=>{t.token=null,t.userInfo=null,t.isLoggedIn=!1,localStorage.removeItem("token")}}}),{setToken:V,setUserInfo:W,logout:X}=w.actions,Y=w.reducer,Z=O({reducer:{user:Y}}),D=C,ee=N,te=""+new URL("../png/avator-DQl2h3Bt.png",import.meta.url).href,{Header:se,Sider:oe,Content:re}=I,ne=({children:t})=>{const o=D(),{userInfo:n,isLoggedIn:a}=ee(l=>l.user),r=$(),s=v(),i=r.pathname;console.log(i);const[c,p]=h.useState(!1),j=()=>{localStorage.removeItem("token"),localStorage.removeItem("userInfo"),g.success("退出登录成功"),o(X()),s("/login")},y={items:[{key:"logout",icon:e.jsx(J,{}),label:"退出登录",onClick:j}]};return e.jsxs(I,{style:{minHeight:"100vh"},children:[e.jsxs(oe,{trigger:null,collapsible:!0,collapsed:c,children:[e.jsx("div",{className:c?"demo-logo-vertical is-collapsed":"demo-logo-vertical",children:e.jsx("h4",{children:" React-Admin"})}),e.jsx(P,{mode:"inline",defaultSelectedKeys:["/"],selectedKeys:[i],items:[{key:"/",icon:e.jsx(K,{}),label:e.jsx(k,{to:"/",children:"首页"})},{key:"/items",icon:e.jsx(S,{}),label:e.jsx(k,{to:"/items",children:"列表"})}]})]}),e.jsxs(I,{children:[e.jsxs(se,{style:{background:"#fff",padding:"0 24px 0 0",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(d,{type:"text",icon:c?e.jsx(U,{}):e.jsx(H,{}),onClick:()=>p(!c),style:{fontSize:"16px",width:64,height:64}}),e.jsx(T,{menu:y,placement:"bottomRight",children:e.jsxs(B,{className:"user-info",style:{cursor:"pointer"},children:[a?e.jsx(b,{src:te,alt:"avatar",crossOrigin:"anonymous"}):e.jsx(b,{icon:e.jsx(S,{})}),e.jsx("span",{children:(n==null?void 0:n.username)||"未登录"})]})})]}),e.jsx(re,{style:{margin:"16px"},children:t})]})]})},ie=()=>e.jsxs("div",{children:[e.jsx("h1",{children:"欢迎来到首页"}),e.jsx("p",{children:"This is the home page of the admin system."})]}),ae=({data:t,onEdit:o,onDelete:n})=>{const a=[{title:"编号",dataIndex:"id",key:"id"},{title:"名称",dataIndex:"name",key:"name"},{title:"描述",dataIndex:"description",key:"description"},{title:"操作",key:"action",render:(r,s)=>e.jsxs(e.Fragment,{children:[e.jsx(d,{onClick:()=>o(s),children:"编辑"}),e.jsx(d,{onClick:()=>n(s.id),danger:!0,children:"删除"})]})}];return e.jsx(M,{dataSource:t,columns:a,rowKey:"id"})},le=({initialValues:t,onSubmit:o,onCancel:n})=>{const{register:a,handleSubmit:r,formState:{errors:s},setValue:i}=_({defaultValues:t});f.useEffect(()=>{t&&(i("id",t.id),i("name",t.name),i("description",t.description))},[t,i]);const c=p=>{console.log(p),o(p)};return e.jsxs(m,{onFinish:r(c),children:[e.jsxs(m.Item,{label:"名称",...a("name",{required:"名称为必填项"}),children:[e.jsx(x,{}),s.name&&e.jsx("span",{style:{color:"red"},children:s.name.message})]}),e.jsx(m.Item,{label:"描述",...a("description"),children:e.jsx(x.TextArea,{})}),e.jsxs(m.Item,{children:[e.jsx(d,{type:"primary",htmlType:"submit",children:"提交"}),e.jsx(d,{onClick:n,style:{marginLeft:8},children:"取消"})]})]})},ce=[{id:1,name:"Item 1",description:"Description 1"},{id:2,name:"Item 2",description:"Description 2"},{id:3,name:"Item 3",description:"Description 3"}],me=()=>{const[t,o]=h.useState(ce),[n,a]=h.useState(null),[r,s]=h.useState(!1),i=l=>{a(l),s(!0)},c=l=>{o(t.filter(u=>u.id!==l))},p=l=>{if(n)o(t.map(u=>u.id===l.id?l:u));else{const u={...l,id:Date.now()};o([...t,u])}s(!1),a(null)},j=()=>{s(!1),a(null)},y=()=>{a(null),s(!0)};return e.jsxs("div",{className:"App",children:[e.jsx("h1",{children:"用户列表"}),e.jsx(d,{onClick:y,type:"primary",style:{marginBottom:16},children:"新增"}),r&&e.jsx(le,{initialValues:n||void 0,onSubmit:p,onCancel:j}),e.jsx(ae,{data:t,onEdit:i,onDelete:c})]})},de=()=>{const t=D(),[o,n]=h.useState(!1),a=v(),r=async s=>{try{n(!0),await new Promise(i=>setTimeout(i,1e3)),s.username==="admin"&&s.password==="123456"?(g.success("登录成功！"),localStorage.setItem("token","dummy-token"),localStorage.setItem("userInfo",JSON.stringify({username:s.username})),t(V("dummy-token")),t(W({username:s.username})),a("/",{replace:!0})):g.error("用户名或密码错误！")}catch(i){console.log(i),g.error("登录失败，请重试！")}finally{n(!1)}};return e.jsx("div",{className:"login-container",children:e.jsxs("div",{className:"login-card",children:[e.jsx("h1",{children:"系统登录"}),e.jsxs(m,{name:"loginForm",onFinish:r,autoComplete:"off",children:[e.jsx(m.Item,{name:"username",rules:[{required:!0,message:"请输入用户名！"}],children:e.jsx(x,{prefix:e.jsx(S,{}),placeholder:"请输入用户名",size:"large"})}),e.jsx(m.Item,{name:"password",rules:[{required:!0,message:"请输入密码！"}],children:e.jsx(x.Password,{prefix:e.jsx(Q,{}),placeholder:"请输入密码",size:"large"})}),e.jsx(m.Item,{children:e.jsx(d,{type:"primary",htmlType:"submit",loading:o,block:!0,size:"large",children:"登录"})})]})]})})},R=[{path:"/",element:f.createElement(ie)},{path:"/items",element:f.createElement(me)},{path:"/login",element:f.createElement(de)}],pe=()=>{var t;return e.jsx(A,{store:Z,children:e.jsx(q,{children:e.jsxs(z,{children:[e.jsx(L,{path:"/login",element:(t=R.find(o=>o.path==="/login"))==null?void 0:t.element}),R.filter(o=>o.path!=="/login").map((o,n)=>e.jsx(L,{path:o.path,element:e.jsx(ne,{children:o.element})},n))]})})})},ue=F.createRoot(document.getElementById("root"));ue.render(e.jsx(f.StrictMode,{children:e.jsx(pe,{})}));
