import{c as x}from"./classnames-ELZfJkp_.js";import{a as f,r as v}from"./react-CIM1rrag.js";import{d as he,b as C,g as ce,e as K,k as ge,c as fe,f as pe}from"./@babel-CbNk-B6_.js";import{A as Ne,z as Re}from"./rc-util-jI2IUycA.js";function be(e){return!!(e.addonBefore||e.addonAfter)}function _e(e){return!!(e.prefix||e.suffix||e.allowClear)}function me(e,t,i){var r=t.cloneNode(!0),u=Object.create(e,{target:{value:r},currentTarget:{value:r}});return r.value=i,typeof t.selectionStart=="number"&&typeof t.selectionEnd=="number"&&(r.selectionStart=t.selectionStart,r.selectionEnd=t.selectionEnd),r.setSelectionRange=function(){t.setSelectionRange.apply(t,arguments)},u}function ve(e,t,i,r){if(i){var u=t;if(t.type==="click"){u=me(t,e,""),i(u);return}if(e.type!=="file"&&r!==void 0){u=me(t,e,r),i(u);return}i(u)}}function Fe(e,t){if(e){e.focus(t);var i=t||{},r=i.cursor;if(r){var u=e.value.length;switch(r){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(u,u);break;default:e.setSelectionRange(0,u)}}}}var Ae=f.forwardRef(function(e,t){var i,r,u,b=e.inputElement,_=e.children,h=e.prefixCls,D=e.prefix,F=e.suffix,S=e.addonBefore,A=e.addonAfter,re=e.className,le=e.style,M=e.disabled,L=e.readOnly,ie=e.focused,j=e.triggerFocus,g=e.allowClear,P=e.value,T=e.handleReset,w=e.hidden,d=e.classes,a=e.classNames,k=e.dataAttrs,y=e.styles,c=e.components,O=e.onClear,Z=_??b,$=(c==null?void 0:c.affixWrapper)||"span",G=(c==null?void 0:c.groupWrapper)||"span",p=(c==null?void 0:c.wrapper)||"span",o=(c==null?void 0:c.groupAddon)||"span",H=v.useRef(null),V=function(B){var X;(X=H.current)!==null&&X!==void 0&&X.contains(B.target)&&(j==null||j())},ee=_e(e),E=v.cloneElement(Z,{value:P,className:x((i=Z.props)===null||i===void 0?void 0:i.className,!ee&&(a==null?void 0:a.variant))||null}),z=v.useRef(null);if(f.useImperativeHandle(t,function(){return{nativeElement:z.current||H.current}}),ee){var q=null;if(g){var J=!M&&!L&&P,Q="".concat(h,"-clear-icon"),ne=he(g)==="object"&&g!==null&&g!==void 0&&g.clearIcon?g.clearIcon:"âœ–";q=f.createElement("button",{type:"button",onClick:function(B){T==null||T(B),O==null||O()},onMouseDown:function(B){return B.preventDefault()},className:x(Q,C(C({},"".concat(Q,"-hidden"),!J),"".concat(Q,"-has-suffix"),!!F))},ne)}var N="".concat(h,"-affix-wrapper"),oe=x(N,C(C(C(C(C({},"".concat(h,"-disabled"),M),"".concat(N,"-disabled"),M),"".concat(N,"-focused"),ie),"".concat(N,"-readonly"),L),"".concat(N,"-input-with-clear-btn"),F&&g&&P),d==null?void 0:d.affixWrapper,a==null?void 0:a.affixWrapper,a==null?void 0:a.variant),m=(F||g)&&f.createElement("span",{className:x("".concat(h,"-suffix"),a==null?void 0:a.suffix),style:y==null?void 0:y.suffix},q,F);E=f.createElement($,ce({className:oe,style:y==null?void 0:y.affixWrapper,onClick:V},k==null?void 0:k.affixWrapper,{ref:H}),D&&f.createElement("span",{className:x("".concat(h,"-prefix"),a==null?void 0:a.prefix),style:y==null?void 0:y.prefix},D),E,m)}if(be(e)){var R="".concat(h,"-group"),U="".concat(R,"-addon"),te="".concat(R,"-wrapper"),ae=x("".concat(h,"-wrapper"),R,d==null?void 0:d.wrapper,a==null?void 0:a.wrapper),de=x(te,C({},"".concat(te,"-disabled"),M),d==null?void 0:d.group,a==null?void 0:a.groupWrapper);E=f.createElement(G,{className:de,ref:z},f.createElement(p,{className:ae},S&&f.createElement(o,{className:U},S),E,A&&f.createElement(o,{className:U},A)))}return f.cloneElement(E,{className:x((r=E.props)===null||r===void 0?void 0:r.className,re)||null,style:K(K({},(u=E.props)===null||u===void 0?void 0:u.style),le),hidden:w})}),ke=["show"];function Be(e,t){return v.useMemo(function(){var i={};t&&(i.show=he(t)==="object"&&t.formatter?t.formatter:!!t),i=K(K({},i),e);var r=i,u=r.show,b=ge(r,ke);return K(K({},b),{},{show:!!u,showFormatter:typeof u=="function"?u:void 0,strategy:b.strategy||function(_){return _.length}})},[e,t])}var Ie=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","onKeyUp","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],Oe=v.forwardRef(function(e,t){var i=e.autoComplete,r=e.onChange,u=e.onFocus,b=e.onBlur,_=e.onPressEnter,h=e.onKeyDown,D=e.onKeyUp,F=e.prefixCls,S=F===void 0?"rc-input":F,A=e.disabled,re=e.htmlSize,le=e.className,M=e.maxLength,L=e.suffix,ie=e.showCount,j=e.count,g=e.type,P=g===void 0?"text":g,T=e.classes,w=e.classNames,d=e.styles,a=e.onCompositionStart,k=e.onCompositionEnd,y=ge(e,Ie),c=v.useState(!1),O=fe(c,2),Z=O[0],$=O[1],G=v.useRef(!1),p=v.useRef(!1),o=v.useRef(null),H=v.useRef(null),V=function(n){o.current&&Fe(o.current,n)},ee=Ne(e.defaultValue,{value:e.value}),E=fe(ee,2),z=E[0],q=E[1],J=z==null?"":String(z),Q=v.useState(null),ne=fe(Q,2),N=ne[0],oe=ne[1],m=Be(j,ie),R=m.max||M,U=m.strategy(J),te=!!R&&U>R;v.useImperativeHandle(t,function(){var l;return{focus:V,blur:function(){var s;(s=o.current)===null||s===void 0||s.blur()},setSelectionRange:function(s,Y,W){var I;(I=o.current)===null||I===void 0||I.setSelectionRange(s,Y,W)},select:function(){var s;(s=o.current)===null||s===void 0||s.select()},input:o.current,nativeElement:((l=H.current)===null||l===void 0?void 0:l.nativeElement)||o.current}}),v.useEffect(function(){p.current&&(p.current=!1),$(function(l){return l&&A?!1:l})},[A]);var ae=function(n,s,Y){var W=s;if(!G.current&&m.exceedFormatter&&m.max&&m.strategy(s)>m.max){if(W=m.exceedFormatter(s,{max:m.max}),s!==W){var I,se;oe([((I=o.current)===null||I===void 0?void 0:I.selectionStart)||0,((se=o.current)===null||se===void 0?void 0:se.selectionEnd)||0])}}else if(Y.source==="compositionEnd")return;q(W),o.current&&ve(o.current,n,r,W)};v.useEffect(function(){if(N){var l;(l=o.current)===null||l===void 0||l.setSelectionRange.apply(l,pe(N))}},[N]);var de=function(n){ae(n,n.target.value,{source:"change"})},ue=function(n){G.current=!1,ae(n,n.currentTarget.value,{source:"compositionEnd"}),k==null||k(n)},B=function(n){_&&n.key==="Enter"&&!p.current&&(p.current=!0,_(n)),h==null||h(n)},X=function(n){n.key==="Enter"&&(p.current=!1),D==null||D(n)},ye=function(n){$(!0),u==null||u(n)},xe=function(n){p.current&&(p.current=!1),$(!1),b==null||b(n)},Ee=function(n){q(""),V(),o.current&&ve(o.current,n,r)},Ce=te&&"".concat(S,"-out-of-range"),Se=function(){var n=Re(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]);return f.createElement("input",ce({autoComplete:i},n,{onChange:de,onFocus:ye,onBlur:xe,onKeyDown:B,onKeyUp:X,className:x(S,C({},"".concat(S,"-disabled"),A),w==null?void 0:w.input),style:d==null?void 0:d.input,ref:o,size:re,type:P,onCompositionStart:function(Y){G.current=!0,a==null||a(Y)},onCompositionEnd:ue}))},we=function(){var n=Number(R)>0;if(L||m.show){var s=m.showFormatter?m.showFormatter({value:J,count:U,maxLength:R}):"".concat(U).concat(n?" / ".concat(R):"");return f.createElement(f.Fragment,null,m.show&&f.createElement("span",{className:x("".concat(S,"-show-count-suffix"),C({},"".concat(S,"-show-count-has-suffix"),!!L),w==null?void 0:w.count),style:K({},d==null?void 0:d.count)},s),L)}return null};return f.createElement(Ae,ce({},y,{prefixCls:S,className:x(le,Ce),handleReset:Ee,value:J,focused:Z,triggerFocus:V,suffix:we(),disabled:A,classes:T,classNames:w,styles:d}),Se())});export{Ae as B,Oe as I,ve as r,Fe as t,Be as u};
