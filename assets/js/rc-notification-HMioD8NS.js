import{c as H,d as ge,g as ee,b as le,k as Ne,e as z,f as B}from"./@babel-CbNk-B6_.js";import{r as t,a as J}from"./react-CIM1rrag.js";import{r as Re}from"./react-dom-CJeuIbjI.js";import{c as Z}from"./classnames-ELZfJkp_.js";import{a as pe}from"./rc-motion-C8hKN_nz.js";import{C as Ae,K as Le}from"./rc-util-jI2IUycA.js";var Pe=t.forwardRef(function(e,o){var v=e.prefixCls,s=e.style,u=e.className,N=e.duration,C=N===void 0?4.5:N,A=e.showProgress,b=e.pauseOnHover,L=b===void 0?!0:b,F=e.eventKey,D=e.content,m=e.closable,g=e.closeIcon,M=g===void 0?"x":g,y=e.props,f=e.onClick,K=e.onNoticeClose,I=e.times,x=e.hovering,S=t.useState(!1),R=H(S,2),l=R[0],h=R[1],a=t.useState(0),n=H(a,2),c=n[0],r=n[1],p=t.useState(0),P=H(p,2),E=P[0],U=P[1],d=x||l,_=C>0&&A,O=function(){K(F)},q=function(i){(i.key==="Enter"||i.code==="Enter"||i.keyCode===Le.ENTER)&&O()};t.useEffect(function(){if(!d&&C>0){var w=Date.now()-E,i=setTimeout(function(){O()},C*1e3-E);return function(){L&&clearTimeout(i),U(Date.now()-w)}}},[C,d,I]),t.useEffect(function(){if(!d&&_&&(L||E===0)){var w=performance.now(),i,k=function te(){cancelAnimationFrame(i),i=requestAnimationFrame(function(ae){var G=ae+E-w,j=Math.min(G/(C*1e3),1);r(j*100),j<1&&te()})};return k(),function(){L&&cancelAnimationFrame(i)}}},[C,E,d,_,I]);var V=t.useMemo(function(){return ge(m)==="object"&&m!==null?m:m?{closeIcon:M}:{}},[m,M]),ne=Ae(V,!0),Q=100-(!c||c<0?0:c>100?100:c),T="".concat(v,"-notice");return t.createElement("div",ee({},y,{ref:o,className:Z(T,u,le({},"".concat(T,"-closable"),m)),style:s,onMouseEnter:function(i){var k;h(!0),y==null||(k=y.onMouseEnter)===null||k===void 0||k.call(y,i)},onMouseLeave:function(i){var k;h(!1),y==null||(k=y.onMouseLeave)===null||k===void 0||k.call(y,i)},onClick:f}),t.createElement("div",{className:"".concat(T,"-content")},D),m&&t.createElement("a",ee({tabIndex:0,className:"".concat(T,"-close"),onKeyDown:q,"aria-label":"Close"},ne,{onClick:function(i){i.preventDefault(),i.stopPropagation(),O()}}),V.closeIcon),_&&t.createElement("progress",{className:"".concat(T,"-progress"),max:"100",value:Q},Q+"%"))}),he=J.createContext({}),Ge=function(o){var v=o.children,s=o.classNames;return J.createElement(he.Provider,{value:{classNames:s}},v)},ve=8,me=3,ye=16,_e=function(o){var v={offset:ve,threshold:me,gap:ye};if(o&&ge(o)==="object"){var s,u,N;v.offset=(s=o.offset)!==null&&s!==void 0?s:ve,v.threshold=(u=o.threshold)!==null&&u!==void 0?u:me,v.gap=(N=o.gap)!==null&&N!==void 0?N:ye}return[!!o,v]},be=["className","style","classNames","styles"],Me=function(o){var v=o.configList,s=o.placement,u=o.prefixCls,N=o.className,C=o.style,A=o.motion,b=o.onAllNoticeRemoved,L=o.onNoticeClose,F=o.stack,D=t.useContext(he),m=D.classNames,g=t.useRef({}),M=t.useState(null),y=H(M,2),f=y[0],K=y[1],I=t.useState([]),x=H(I,2),S=x[0],R=x[1],l=v.map(function(d){return{config:d,key:String(d.key)}}),h=_e(F),a=H(h,2),n=a[0],c=a[1],r=c.offset,p=c.threshold,P=c.gap,E=n&&(S.length>0||l.length<=p),U=typeof A=="function"?A(s):A;return t.useEffect(function(){n&&S.length>1&&R(function(d){return d.filter(function(_){return l.some(function(O){var q=O.key;return _===q})})})},[S,l,n]),t.useEffect(function(){var d;if(n&&g.current[(d=l[l.length-1])===null||d===void 0?void 0:d.key]){var _;K(g.current[(_=l[l.length-1])===null||_===void 0?void 0:_.key])}},[l,n]),J.createElement(pe,ee({key:s,className:Z(u,"".concat(u,"-").concat(s),m==null?void 0:m.list,N,le(le({},"".concat(u,"-stack"),!!n),"".concat(u,"-stack-expanded"),E)),style:C,keys:l,motionAppear:!0},U,{onAllRemoved:function(){b(s)}}),function(d,_){var O=d.config,q=d.className,V=d.style,ne=d.index,Q=O,T=Q.key,w=Q.times,i=String(T),k=O,te=k.className,ae=k.style,G=k.classNames,j=k.styles,ke=Ne(k,be),oe=l.findIndex(function(Y){return Y.key===i}),X={};if(n){var $=l.length-1-(oe>-1?oe:ne-1),fe=s==="top"||s==="bottom"?"-50%":"0";if($>0){var re,ie,se;X.height=E?(re=g.current[i])===null||re===void 0?void 0:re.offsetHeight:f==null?void 0:f.offsetHeight;for(var de=0,ce=0;ce<$;ce++){var ue;de+=((ue=g.current[l[l.length-1-ce].key])===null||ue===void 0?void 0:ue.offsetHeight)+P}var Se=(E?de:$*r)*(s.startsWith("top")?1:-1),Ee=!E&&f!==null&&f!==void 0&&f.offsetWidth&&(ie=g.current[i])!==null&&ie!==void 0&&ie.offsetWidth?((f==null?void 0:f.offsetWidth)-r*2*($<3?$:3))/((se=g.current[i])===null||se===void 0?void 0:se.offsetWidth):1;X.transform="translate3d(".concat(fe,", ").concat(Se,"px, 0) scaleX(").concat(Ee,")")}else X.transform="translate3d(".concat(fe,", 0, 0)")}return J.createElement("div",{ref:_,className:Z("".concat(u,"-notice-wrapper"),q,G==null?void 0:G.wrapper),style:z(z(z({},V),X),j==null?void 0:j.wrapper),onMouseEnter:function(){return R(function(W){return W.includes(i)?W:[].concat(B(W),[i])})},onMouseLeave:function(){return R(function(W){return W.filter(function(xe){return xe!==i})})}},J.createElement(Pe,ee({},ke,{ref:function(W){oe>-1?g.current[i]=W:delete g.current[i]},prefixCls:u,classNames:G,styles:j,className:Z(te,m==null?void 0:m.notice),style:ae,times:w,key:T,eventKey:T,onNoticeClose:L,hovering:n&&S.length>0})))})},we=t.forwardRef(function(e,o){var v=e.prefixCls,s=v===void 0?"rc-notification":v,u=e.container,N=e.motion,C=e.maxCount,A=e.className,b=e.style,L=e.onAllRemoved,F=e.stack,D=e.renderNotifications,m=t.useState([]),g=H(m,2),M=g[0],y=g[1],f=function(n){var c,r=M.find(function(p){return p.key===n});r==null||(c=r.onClose)===null||c===void 0||c.call(r),y(function(p){return p.filter(function(P){return P.key!==n})})};t.useImperativeHandle(o,function(){return{open:function(n){y(function(c){var r=B(c),p=r.findIndex(function(U){return U.key===n.key}),P=z({},n);if(p>=0){var E;P.times=(((E=c[p])===null||E===void 0?void 0:E.times)||0)+1,r[p]=P}else P.times=0,r.push(P);return C>0&&r.length>C&&(r=r.slice(-C)),r})},close:function(n){f(n)},destroy:function(){y([])}}});var K=t.useState({}),I=H(K,2),x=I[0],S=I[1];t.useEffect(function(){var a={};M.forEach(function(n){var c=n.placement,r=c===void 0?"topRight":c;r&&(a[r]=a[r]||[],a[r].push(n))}),Object.keys(x).forEach(function(n){a[n]=a[n]||[]}),S(a)},[M]);var R=function(n){S(function(c){var r=z({},c),p=r[n]||[];return p.length||delete r[n],r})},l=t.useRef(!1);if(t.useEffect(function(){Object.keys(x).length>0?l.current=!0:l.current&&(L==null||L(),l.current=!1)},[x]),!u)return null;var h=Object.keys(x);return Re.createPortal(t.createElement(t.Fragment,null,h.map(function(a){var n=x[a],c=t.createElement(Me,{key:a,configList:n,placement:a,prefixCls:s,className:A==null?void 0:A(a),style:b==null?void 0:b(a),motion:N,onNoticeClose:f,onAllNoticeRemoved:R,stack:F});return D?D(c,{prefixCls:s,key:a}):c})),u)}),He=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],Ie=function(){return document.body},Ce=0;function Te(){for(var e={},o=arguments.length,v=new Array(o),s=0;s<o;s++)v[s]=arguments[s];return v.forEach(function(u){u&&Object.keys(u).forEach(function(N){var C=u[N];C!==void 0&&(e[N]=C)})}),e}function Ue(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=e.getContainer,v=o===void 0?Ie:o,s=e.motion,u=e.prefixCls,N=e.maxCount,C=e.className,A=e.style,b=e.onAllRemoved,L=e.stack,F=e.renderNotifications,D=Ne(e,He),m=t.useState(),g=H(m,2),M=g[0],y=g[1],f=t.useRef(),K=t.createElement(we,{container:M,ref:f,prefixCls:u,motion:s,maxCount:N,className:C,style:A,onAllRemoved:b,stack:L,renderNotifications:F}),I=t.useState([]),x=H(I,2),S=x[0],R=x[1],l=t.useMemo(function(){return{open:function(a){var n=Te(D,a);(n.key===null||n.key===void 0)&&(n.key="rc-notification-".concat(Ce),Ce+=1),R(function(c){return[].concat(B(c),[{type:"open",config:n}])})},close:function(a){R(function(n){return[].concat(B(n),[{type:"close",key:a}])})},destroy:function(){R(function(a){return[].concat(B(a),[{type:"destroy"}])})}}},[]);return t.useEffect(function(){y(v())}),t.useEffect(function(){f.current&&S.length&&(S.forEach(function(h){switch(h.type){case"open":f.current.open(h.config);break;case"close":f.current.close(h.key);break;case"destroy":f.current.destroy();break}}),R(function(h){return h.filter(function(a){return!S.includes(a)})}))},[S]),[l,K]}export{Pe as N,Ge as a,Ue as u};
